<!DOCTYPE html>
<html>
  <head>
    <title>Lunch de NiceShot</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">

    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <!-- Tailwind v4 は CSS ファイルを直接 link しない -->
    <%= javascript_importmap_tags %>

    <!-- ▼ カスタムCSS変数 -->
    <style>
      :root {
        --color-brandGreen: #146C17;
        --color-brandOrange: #FF990A;
        --color-brandBlue:  #0E7CCC;
        --color-brandBeige: #F7F2E5;
      }

      .header-title-area {
        display: flex;
        flex-direction: column;
        align-items: flex-start;
        line-height: 1.25;
      }

      .no-underline {
        text-decoration: none !important;
      }
    </style>
  </head>

  <body class="min-h-screen" style="background-color: var(--color-brandBeige);">

    <!-- ▼ ヘッダー -->
    <header
      class="w-full fixed top-0 left-0 shadow px-6 py-4 flex justify-between items-center z-50"
      style="background-color: var(--color-brandBeige);"
    >
      <div class="header-title-area">
        <%= link_to root_path,
            class: "text-2xl font-bold no-underline",
            style: "color: var(--color-brandGreen);" do %>
          Lunch <span style="color: var(--color-brandOrange);">de</span> NiceShot
        <% end %>

        <p style="color: var(--color-brandBlue); font-size: 0.85rem; margin-top: 2px;">
          〜“勝ち飯”が、次のナイスショットを呼ぶ〜
        </p>
      </div>

      <nav class="flex space-x-6 font-medium">
        <% if user_signed_in? %>
          <span style="color: var(--color-brandBlue);">
            <%= current_user.email %> さん
          </span>

          <%= link_to "ログアウト",
              destroy_user_session_path,
              data: { turbo_method: :delete },
              method: :delete,
              class: "hover:underline no-underline",
              style: "color: var(--color-brandBlue);" %>

        <% else %>
          <%= link_to "ログイン",
                new_user_session_path,
                class: "hover:underline no-underline",
                style: "color: var(--color-brandBlue);" %>

          <%= link_to "新規登録",
                new_user_registration_path,
                class: "hover:underline no-underline",
                style: "color: var(--color-brandBlue);" %>
        <% end %>
      </nav>
    </header>
    <!-- ▲ ヘッダー -->

    <!-- ▼ メイン（ヘッダー高さの余白） -->
    <main class="container mx-auto px-5" style="padding-top: 135px;">

      <!-- ▼ Flash メッセージ（ここが今回の追加ポイント!!） -->
      <% if notice.present? %>
        <div class="mb-4 px-4 py-3 rounded border text-green-800 bg-green-100 border-green-300">
          <%= notice %>
        </div>
      <% end %>

      <% if alert.present? %>
        <div class="mb-4 px-4 py-3 rounded border text-red-800 bg-red-100 border-red-300">
          <%= alert %>
        </div>
      <% end %>
      <!-- ▲ Flash -->

      <%= yield %>
    </main>

  </body>
</html>
